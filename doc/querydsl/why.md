Querydsl 을 사용하게 되어서 정리를 시작했다. 사실 실무에서는 연관관계의 주인이 어디로 말려들어가서 이쪽 말고 상대편에서 join fetch 를 할 수 밖에 없는 상황이 발생하기에 querydsl 보다는 연관관계 매핑에 의거한 테이블 설계가 더 중요했던 것 같다.<br/>

그런데 이런 내용을 모르는 상태로 Querydsl 만 쓰려고 하는 경우를 꽤 본 적이 있다. Querydsl 좋지. 쓰면 좋다. 그런데 연관관계 매핑이 잘 되도록 테이블 설계하는 것도 중요하다고 보는 관점이다. fetch를 쓸수 있는 객체가 이쪽 객체인지 저쪽객체인지 정도는 알아야하지 않을까? 쿼리 때려보면서 파악하기 전에 그걸 알아야 객체 설계가 되서 연관관계 매핑을 끊을 일도 없을 거고...<br/>

어쩌다보니 회사일을 하면서 갑자기 Querydsl 을 써야 하는 상황이 웠다. Querydsl 은 뭐 나도 몇년 전에 썼다. 너무 오랜만이라 자료를 정리하기 시작했다.<br/>

이 Querydsl 도 회사마다 쓰는 스타일이 다르다. 어떤 회사는 인프런의 김ㅇㅇ 강사님이 한 소스코드를 그대로 비슷하게 옮겨와서 `--RepositoryCustom` 으로 쓰기도 하고  어떤 회사는 `-Querydsl` 이라는 별도의 타입으로 분류해서 사용하기도 한다. Jpa 기술과 Querydsl 기술간의 의존성을 서로 독립시키고 싶을 경우 `-Querydsl` 로 따로 컴포넌트로 분리해서 사용한다.<br/>

사실 Repository 에는 순수 JPA 기술만 있는게 낫다는 생각에 나도 동의한다.<br/>

아무튼 그냥 갑자기 또 Querydsl 을 써봐야 해서 적어봤다.<br/>

실무에서는 (이번회사 제외) 어드민이 아닌 이상 Querydsl 은 성능이 안났던 경험이 있다. 그래서 성능이 중요한 쿼리면 JPQL 또는 jdbcTemplate 을 사용했다. 그 당시 회사 분들이 이미 그쪽 기술을 알고 있는 상태이기에 이상하게 라이브러리 하나에 집착하는 태도를 꽤 냉소적인 태도를 보이는 분들이 있으셨는데 나도 Querydsl 에 대해 보수적으로 보게 된 이유는 이 분들 때문도 조금 있다고 본다.<br/>

그 당시 제품의 분야는 주식 쪽이었다. 주식 쪽은 트래픽이 단발성 트래픽이 꽤 높아서 조회 쿼리의 성능이 꽤 중요하다.<br/>



아 하나더 있다. Querydsl 을 못쓰는 케이스. 테이블이 여기 저기 얽혀있어서 인라인 뷰를 쓸 수 밖에 없는경우. 이런 겨우에는 Querydsl 을 못 쓴다. 김영한님 강의에서도 설명하고 있다.<br/>

